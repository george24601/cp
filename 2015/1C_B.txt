max: construct the extreme case:
find a part where suffix is also prefix, and repeat the pattern, that is the max you can build, if no suffix is also prefix, just simply
repeats

What is expected # of bananas

easier case: all letters are unique,i.e. no overlap
Pr = Pr(staring at first letter) + Pr(starting at 2nd leter) + ...Pr(starting at n-w letter)

if there is suffix that is also prefix

P(p, m, s, L) = 

consider a formed prefix, 

At end of index, need to 

E(prefix, L) =  Pr(prefix) * E(m, L - L(prefix))a + (1 - Pr(prefix)) * P(prefix, L-L(prefix))
E(middle, L) =  Pr(middle) * E(last, L - L(middle))a + (1 - Pr(middle)) * P(prefix, L-L(middle))

E(last, L) = Pr(last) (1 + E(prefix, L - L(last)))  + (1 - Pr(last)) * P(prefix, L - L(middle))

obvious Pr = 0, if any part > L
